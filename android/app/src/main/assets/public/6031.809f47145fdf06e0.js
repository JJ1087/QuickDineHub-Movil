"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6031],{6031:(R,h,s)=>{s.r(h),s.d(h,{LoginPageModule:()=>j});var v=s(177),l=s(4341),d=s(4742),f=s(691),g=s(467),c=s(8254),e=s(3953),y=s(8810),b=s(9437),x=s(1626);let L=(()=>{var o;class i{constructor(t){this.http=t,this.apiUrl="https://quickdinehub-back1.onrender.com"}login(t,n){return this.http.post(`${this.apiUrl}/login-clientes`,{email:t,password:n}).pipe((0,b.W)(a=>(0,y.$)(()=>new Error(a.message))))}}return(o=i).\u0275fac=function(t){return new(t||o)(e.KVO(x.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),i})();function F(o,i){1&o&&(e.qex(0),e.EFF(1,"Correo Electr\xf3nico es obligatorio"),e.bVm())}function w(o,i){1&o&&(e.qex(0),e.EFF(1,"Correo Electr\xf3nico no v\xe1lido"),e.bVm())}function P(o,i){if(1&o&&(e.j41(0,"small",14),e.nrm(1,"ion-icon",15),e.DNE(2,F,2,0,"ng-container",16)(3,w,2,0,"ng-container",16),e.k0s()),2&o){const r=e.XpG();e.R7$(2),e.Y8G("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.required),e.R7$(),e.Y8G("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.email)}}function k(o,i){1&o&&(e.j41(0,"small",14),e.nrm(1,"ion-icon",15),e.EFF(2," Contrase\xf1a es obligatoria "),e.k0s())}const C=[{path:"",component:(()=>{var o;class i{constructor(t,n,a,m,u){this.router=t,this.fb=n,this.authService=a,this.toastController=m,this.loadingController=u,this.hidePassword=!0,this.isLoading=!1}ngOnInit(){this.loginForm=this.fb.group({email:["",[l.k0.required,l.k0.email]],password:["",l.k0.required]})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}presentToast(t){var n=this;return(0,g.A)(function*(){yield(yield n.toastController.create({message:t,duration:3e3,position:"top",color:"danger"})).present()})()}presentLoading(){var t=this;return(0,g.A)(function*(){yield(yield t.loadingController.create({message:"Verificando...",spinner:"circles"})).present()})()}dismissLoading(){var t=this;return(0,g.A)(function*(){yield t.loadingController.dismiss()})()}onLogin(){var m,t=this;if(this.loginForm.valid){this.presentLoading();const{email:n,password:a}=this.loginForm.value;this.authService.login(n,a).subscribe({next:(m=(0,g.A)(function*(u){yield t.dismissLoading();const{accessToken:p,id:I,rol:G,nombre:T}=u.dataUser;yield c.p.set({key:"authToken",value:p}),yield c.p.set({key:"userId",value:I}),yield c.p.set({key:"userRole",value:G}),yield c.p.set({key:"userName",value:T}),t.router.navigate(["/tabs"])}),function(p){return m.apply(this,arguments)}),error:function(){var m=(0,g.A)(function*(u){yield t.dismissLoading(),t.presentToast("Correo o contrase\xf1a incorrectos")});return function(p){return m.apply(this,arguments)}}()})}}}return(o=i).\u0275fac=function(t){return new(t||o)(e.rXU(f.Ix),e.rXU(l.ok),e.rXU(L),e.rXU(d.K_),e.rXU(d.Xi))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-login"]],decls:22,vars:7,consts:[[3,"fullscreen"],[1,"min-h-screen","flex","justify-center","items-center","px-4","sm:px-6","lg:px-8"],[1,"w-full","max-w-md","bg-white","rounded-lg","p-6","sm:p-8","md:p-10","lg:max-w-lg","lg:p-12"],["src","assets/icon/logo-empresa.png","alt","Logotipo de QuickDineHub",1,"w-28","sm:w-32","md:w-40","h-auto","mb-4","mx-auto"],[1,"text-lg","sm:text-xl","md:text-2xl","lg:text-3xl","font-bold","text-center","text-gray-800","mb-6"],[1,"space-y-5",3,"ngSubmit","formGroup"],["for","email",1,"block","text-sm","md:text-base","font-medium","text-gray-700"],["type","email","id","email","formControlName","email","placeholder","tucorreo@ejemplo.com",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-[#ff8633]","sm:text-sm","md:text-base"],["class","flex items-center mt-1 text-red-600 text-sm md:text-base",4,"ngIf"],["for","password",1,"block","text-sm","md:text-base","font-medium","text-gray-700"],[1,"relative"],["id","password","formControlName","password","placeholder","********",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-[#ff8633]","sm:text-sm","md:text-base",3,"type"],[1,"absolute","right-3","top-3","cursor-pointer","text-gray-500",3,"click","name"],["type","submit",1,"w-full","bg-[#ff8633]","text-white","px-4","py-2","rounded-lg","hover:bg-[#ff6133]","focus:outline-none","focus:ring-2","focus:ring-[#ff8633]","focus:ring-offset-2","text-sm","md:text-base","lg:text-lg",3,"disabled"],[1,"flex","items-center","mt-1","text-red-600","text-sm","md:text-base"],["name","alert-circle",1,"mr-1"],[4,"ngIf"]],template:function(t,n){1&t&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"div",2),e.nrm(3,"img",3),e.j41(4,"h2",4),e.EFF(5,"Iniciar Sesi\xf3n"),e.k0s(),e.j41(6,"form",5),e.bIt("ngSubmit",function(){return n.onLogin()}),e.j41(7,"div")(8,"label",6),e.EFF(9,"Correo Electr\xf3nico"),e.k0s(),e.nrm(10,"input",7),e.DNE(11,P,4,2,"small",8),e.k0s(),e.j41(12,"div")(13,"label",9),e.EFF(14,"Contrase\xf1a"),e.k0s(),e.j41(15,"div",10),e.nrm(16,"input",11),e.j41(17,"ion-icon",12),e.bIt("click",function(){return n.togglePasswordVisibility()}),e.k0s()(),e.DNE(18,k,3,0,"small",8),e.k0s(),e.j41(19,"div")(20,"button",13),e.EFF(21," Iniciar Sesi\xf3n "),e.k0s()()()()()()),2&t&&(e.Y8G("fullscreen",!0),e.R7$(6),e.Y8G("formGroup",n.loginForm),e.R7$(5),e.Y8G("ngIf",(null==n.email?null:n.email.invalid)&&((null==n.email?null:n.email.dirty)||(null==n.email?null:n.email.touched))),e.R7$(5),e.Y8G("type",n.hidePassword?"password":"text"),e.R7$(),e.FS9("name",n.hidePassword?"eye-off":"eye"),e.R7$(),e.Y8G("ngIf",(null==n.password?null:n.password.invalid)&&((null==n.password?null:n.password.dirty)||(null==n.password?null:n.password.touched))),e.R7$(2),e.Y8G("disabled",n.loginForm.invalid))},dependencies:[v.bT,l.qT,l.me,l.BC,l.cb,d.W9,d.iq,l.j4,l.JD]}),i})()}];let E=(()=>{var o;class i{}return(o=i).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[f.iI.forChild(C),f.iI]}),i})(),j=(()=>{var o;class i{}return(o=i).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[v.MD,l.YN,d.bv,E,l.X1]}),i})()}}]);