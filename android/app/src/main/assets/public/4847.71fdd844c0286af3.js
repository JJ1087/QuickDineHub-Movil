"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4847],{4847:($,b,l)=>{l.r(b),l.d(b,{Tab1PageModule:()=>I});var u=l(4742),g=l(177),p=l(4341),x=l(1307),v=l(691),d=l(467),m=l(8254),e=l(3953),h=l(1626);let y=(()=>{var o;class a{constructor(t){this.http=t,this.apiUrl="https://quickdinehub-back1.onrender.com"}obtenerProductos(){return this.http.get(`${this.apiUrl}/info-producto1`)}actualizarCarritoBD(t){var r=this;return(0,d.A)(function*(){const{value:n}=yield m.p.get({key:"userId"}),{value:s}=yield m.p.get({key:"authToken"}),c=new h.Lr({Authorization:`Bearer ${s}`});return r.http.post(`${r.apiUrl}/guardar-carrito/${n}`,{carrito:t},{headers:c})})()}obtenerDatoComensal(){var t=this;return(0,d.A)(function*(){const{value:r}=yield m.p.get({key:"userId"});if(!r)throw new Error("No se encontr\xf3 el ID del usuario en el almacenamiento.");return t.http.get(`${t.apiUrl}/info-comensalId/${r}`)})()}}return(o=a).\u0275fac=function(t){return new(t||o)(e.KVO(h.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),a})(),k=(()=>{var o;class a{constructor(t){this.httpClient=t,this.AUTH_SERVER="https://quickdinehub-back1.onrender.com"}obtenerInfoDeProductoPorId(t){return this.httpClient.get(`${this.AUTH_SERVER}/info-producto/${t}`)}}return(o=a).\u0275fac=function(t){return new(t||o)(e.KVO(h.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();function T(o,a){if(1&o){const i=e.RV6();e.j41(0,"div",1),e.nrm(1,"div",2),e.j41(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"button",7),e.bIt("click",function(){e.eBV(i);const r=e.XpG();return e.Njj(r.closeModal())}),e.j41(7,"span",8),e.EFF(8,"Close"),e.k0s(),e.qSk(),e.j41(9,"svg",9),e.nrm(10,"path",10),e.k0s()(),e.joV(),e.j41(11,"div",11)(12,"div",12)(13,"div",13),e.nrm(14,"img",14),e.k0s()(),e.j41(15,"div",15)(16,"h2",16),e.EFF(17),e.k0s(),e.j41(18,"section",17)(19,"h3",18),e.EFF(20,"Product information"),e.k0s(),e.j41(21,"p",19),e.EFF(22),e.k0s()(),e.j41(23,"section",20)(24,"h3",21),e.EFF(25,"Product description"),e.k0s(),e.j41(26,"p",22),e.EFF(27),e.k0s()(),e.j41(28,"section",23)(29,"h3",24),e.EFF(30,"Product options"),e.k0s()()()()()()()()()}if(2&o){const i=e.XpG();e.R7$(14),e.FS9("alt",i.nombreProducto),e.Y8G("src",i.imagenUrl,e.B4B),e.R7$(3),e.JRh(i.nombreProducto),e.R7$(5),e.SpI("$",i.costoUnidad,""),e.R7$(5),e.SpI(" ",i.descripcionProducto," ")}}let P=(()=>{var o;class a{constructor(t){this.authService=t,this.isVisible=!1}ngOnInit(){}openModal(t){this.isVisible=!0,this.loadProduct(t)}closeModal(){this.isVisible=!1}loadProduct(t){this.authService.obtenerInfoDeProductoPorId(t).subscribe(r=>{this.product=r,this.idRestaurante=r.idRestaurante,this.costoEnvio=r.costoEnvio,this.nombreProducto=r.nombre,this.descripcionProducto=r.descripcion,this.costoUnidad=Number(r.precio.$numberDecimal),this.imagenUrl=this.getImageUrl(r.imagen[0])},r=>console.error("Error al obtener la informaci\xf3n del producto:",r))}getImageUrl(t){return`https://quickdinehub-back1.onrender.com/${t}`}}return(o=a).\u0275fac=function(t){return new(t||o)(e.rXU(k))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-product-quickview"]],decls:1,vars:1,consts:[["class","relative z-10","role","dialog","aria-modal","true",4,"ngIf"],["role","dialog","aria-modal","true",1,"relative","z-10"],["aria-hidden","true",1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity","md:block"],[1,"fixed","inset-0","z-10","w-screen","overflow-y-auto"],[1,"flex","min-h-full","items-stretch","justify-center","text-center","md:items-center","md:px-2","lg:px-4"],[1,"flex","w-full","transform","text-left","text-base","transition","md:my-8","md:max-w-2xl","md:px-4","lg:max-w-4xl"],[1,"relative","flex","w-full","items-center","overflow-hidden","bg-white","px-4","pb-8","pt-14","shadow-2xl","sm:px-6","sm:pt-8","md:p-6","lg:p-8"],["type","button",1,"absolute","right-4","top-4","text-gray-400","hover:text-gray-500","sm:right-6","sm:top-8","md:right-6","md:top-6","lg:right-8","lg:top-8",3,"click"],[1,"sr-only"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"grid","w-full","grid-cols-1","items-start","gap-x-6","gap-y-8","sm:grid-cols-12","lg:gap-x-8"],[1,"flex","items-center","justify-center","sm:col-span-4","lg:col-span-5","bg-gray-100","rounded-lg","overflow-hidden"],[1,"flex","justify-center",2,"padding","0 20px"],[1,"object-contain","w-full","h-auto","max-w-xs","max-h-xs",3,"src","alt"],[1,"sm:col-span-8","lg:col-span-7"],[1,"text-2xl","font-bold","text-gray-900","sm:pr-12"],["aria-labelledby","information-heading",1,"mt-2"],["id","information-heading",1,"sr-only"],[1,"text-2xl","text-gray-900"],["aria-labelledby","description-heading",1,"mt-4"],["id","description-heading",1,"sr-only"],[1,"text-sm","text-gray-700"],["aria-labelledby","options-heading",1,"mt-10"],["id","options-heading",1,"sr-only"]],template:function(t,r){1&t&&e.DNE(0,T,31,5,"div",0),2&t&&e.Y8G("ngIf",r.isVisible)},dependencies:[g.bT]}),a})();var F=l(9232);const j=["quickview"],w=["usuario"],f=(o,a)=>({"bg-[#ff8633] text-white hover:bg-[#ff6133] focus:ring-[#ff8633]":o,"bg-gray-200 text-gray-700 hover:bg-gray-300 focus:ring-gray-300":a});function _(o,a){if(1&o){const i=e.RV6();e.qex(0),e.j41(1,"a",21)(2,"div",22),e.nrm(3,"img",23),e.k0s(),e.j41(4,"h3",24),e.EFF(5),e.k0s(),e.j41(6,"p",25),e.EFF(7),e.k0s(),e.j41(8,"div",26)(9,"button",27),e.bIt("click",function(){const r=e.eBV(i).$implicit,n=e.XpG();return e.Njj(n.agregarAlCarrito(r))}),e.nrm(10,"i",28),e.k0s(),e.j41(11,"button",27),e.bIt("click",function(){const r=e.eBV(i).$implicit;e.XpG();const n=e.sdS(34);return e.Njj(n.openModal(r._id))}),e.nrm(12,"i",29),e.k0s()()(),e.bVm()}if(2&o){const i=a.$implicit,t=e.XpG();e.R7$(3),e.FS9("alt",i.nombre),e.Y8G("src",t.getImageUrl(i.imagen[0]),e.B4B),e.R7$(2),e.JRh(i.nombre),e.R7$(2),e.SpI("$",i.precio.$numberDecimal,"")}}const C=[{path:"",component:(()=>{var o;class a{constructor(t,r,n){this.catalogoService=t,this.loadingController=r,this.toastController=n,this.productos=[],this.filteredProductos=[],this.searchTerm="",this.selectedFilter="Todo",this.isLoading=!1,this.userName="",this.carrito=[]}presentLoading(){var t=this;return(0,d.A)(function*(){yield(yield t.loadingController.create({message:"Cargando productos...",spinner:"circles"})).present()})()}dismissLoading(){var t=this;return(0,d.A)(function*(){yield t.loadingController.dismiss()})()}presentToast(t,r){var n=this;return(0,d.A)(function*(){yield(yield n.toastController.create({message:t,duration:3e3,position:"top",color:r})).present()})()}ngOnInit(){this.cargarNombreUsuario(),this.cargarProductos(),this.cargarCarritoComensal()}ionViewWillEnter(){this.cargarCarritoComensal()}cargarNombreUsuario(){var t=this;return(0,d.A)(function*(){const{value:r}=yield m.p.get({key:"userName"});r&&(t.userName=r)})()}cargarProductos(){this.presentLoading(),this.catalogoService.obtenerProductos().subscribe(t=>{this.dismissLoading(),this.productos=t,this.filteredProductos=t},t=>{this.dismissLoading(),this.presentToast("Error de conexion a la red","danger"),console.error("Error al obtener los productos:",t)})}getImageUrl(t){return`https://quickdinehub-back1.onrender.com/${t}`}filterProducts(){this.aplicarFiltro(this.selectedFilter)}aplicarFiltro(t){this.selectedFilter=t;const r=this.searchTerm.toLowerCase();this.filteredProductos=this.productos.filter(n=>{const s=n.nombre.toLowerCase().includes(r),c="Todo"===t||n.etiquetas.includes(t);return s&&c})}agregarAlCarrito(t){var r=this;return(0,d.A)(function*(){if(console.log("Carrito",r.carrito),r.carrito.find(s=>s.productId===t._id&&s.idRestaurante===t.idRestaurante))r.presentToast("Este producto ya est\xe1 en el carrito","warning");else{r.carrito.push({productId:t._id,idRestaurante:t.idRestaurante,cantidad:1,especificacion:""});try{(yield r.catalogoService.actualizarCarritoBD(r.carrito)).subscribe(()=>{r.presentToast("Producto agregado al carrito","success")},R=>{console.error("Error al actualizar el carrito:",R),r.presentToast("Error al agregar producto al carrito","danger")})}catch(c){console.error("Error al ejecutar actualizarCarritoBD:",c),r.presentToast("Error al agregar producto al carrito","danger")}}})()}cargarCarritoComensal(){var t=this;return(0,d.A)(function*(){try{(yield t.catalogoService.obtenerDatoComensal()).subscribe(n=>{t.carrito=n.carrito||[],console.log("Carrito del comensal:",t.carrito)},n=>{console.error("Error al obtener el carrito del comensal",n),t.presentToast("Error al obtener el carrito del comensal","danger")})}catch(r){console.error("Error al ejecutar obtenerDatoComensal:",r),t.presentToast("Error al obtener el carrito del comensal","danger")}})()}}return(o=a).\u0275fac=function(t){return new(t||o)(e.rXU(y),e.rXU(u.Xi),e.rXU(u.K_))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-tab1"]],viewQuery:function(t,r){if(1&t&&(e.GBs(j,5),e.GBs(w,5)),2&t){let n;e.mGM(n=e.lsd())&&(r.quickview=n.first),e.mGM(n=e.lsd())&&(r.usuario=n.first)}},decls:35,vars:16,consts:[["usuario",""],["quickview",""],[3,"fullscreen"],[1,"flex","items-center","space-x-4","p-2","sm:p-4","md:p-6"],["src","assets/icon/FotoUsuario.jpg","alt","Foto de perfil",1,"w-[3.5rem]","h-[3.5rem]","sm:w-[4.5rem]","sm:h-[4.5rem]","md:w-[5.5rem]","md:h-[5.5rem]","rounded-full",3,"click"],[1,"text-md","sm:text-lg","md:text-xl","font-semibold","text-gray-900"],[1,"px-4","py-2","sm:px-6","md:px-8","text-center"],[1,"text-xl","sm:text-2xl","md:text-3xl","font-bold","text-gray-900"],[1,"font-bold",2,"color","#ff8633"],[1,"px-4","py-2","sm:px-6","md:px-8"],[1,"relative","max-w-xs","sm:max-w-md","md:max-w-lg","lg:max-w-xl","mx-auto"],["type","text","placeholder","Buscar...",1,"w-full","p-2","pl-10","rounded-lg","border","border-gray-300","focus:outline-none","focus:ring-2","focus:ring-[#ff8633]","transition","duration-300","ease-in-out",3,"ngModelChange","input","ngModel"],[1,"absolute","left-3","top-2.5"],[1,"fas","fa-search","text-gray-500","h-5","w-5"],[1,"flex","justify-center","space-x-2","md:space-x-4"],[1,"px-4","py-2","font-semibold","rounded-full","focus:outline-none","focus:ring-2","focus:ring-offset-2","transition","duration-300","ease-in-out",3,"click","ngClass"],[1,"bg-white"],[1,"mx-auto","max-w-2xl","px-4","py-16","sm:px-6","sm:py-24","lg:max-w-7xl","lg:px-8"],[1,"sr-only"],[1,"grid","grid-cols-2","gap-x-4","gap-y-10","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","xl:gap-x-8"],[4,"ngFor","ngForOf"],[1,"group","relative","bg-white","shadow-lg","p-4","rounded-lg","flex","flex-col","items-center"],[1,"aspect-square","w-full","overflow-hidden","rounded-lg","bg-gray-200"],[1,"h-full","w-full","object-cover","group-hover:opacity-75",3,"src","alt"],[1,"mt-2","text-sm","text-center","text-gray-700"],[1,"mt-1","text-lg","font-medium","text-gray-900"],[1,"mt-auto","flex","space-x-2","pt-4"],[1,"bg-[#ff8633]","text-white","px-2","py-1","rounded","hover:bg-[#ff6133]",3,"click"],[1,"fas","fa-shopping-cart"],[1,"fas","fa-plus"]],template:function(t,r){if(1&t){const n=e.RV6();e.j41(0,"ion-content",2)(1,"div",3)(2,"img",4),e.bIt("click",function(){e.eBV(n);const c=e.sdS(7);return e.Njj(c.irAPerfilUsuario())}),e.k0s(),e.j41(3,"div")(4,"h4",5),e.EFF(5),e.k0s()(),e.nrm(6,"app-perfil-usuario",null,0),e.k0s(),e.j41(8,"div",6)(9,"h1",7),e.EFF(10," Busca y escoge tu "),e.j41(11,"span",8),e.EFF(12,"comida"),e.k0s(),e.EFF(13," favorita "),e.k0s()(),e.j41(14,"div",9)(15,"div",10)(16,"input",11),e.mxI("ngModelChange",function(c){return e.eBV(n),e.DH7(r.searchTerm,c)||(r.searchTerm=c),e.Njj(c)}),e.bIt("input",function(){return e.eBV(n),e.Njj(r.filterProducts())}),e.k0s(),e.j41(17,"span",12),e.nrm(18,"i",13),e.k0s()()(),e.j41(19,"div",9)(20,"div",14)(21,"button",15),e.bIt("click",function(){return e.eBV(n),e.Njj(r.aplicarFiltro("Todo"))}),e.EFF(22," Todo "),e.k0s(),e.j41(23,"button",15),e.bIt("click",function(){return e.eBV(n),e.Njj(r.aplicarFiltro("Postres"))}),e.EFF(24," Postres "),e.k0s(),e.j41(25,"button",15),e.bIt("click",function(){return e.eBV(n),e.Njj(r.aplicarFiltro("carnes"))}),e.EFF(26," Carnes "),e.k0s()()(),e.j41(27,"div",16)(28,"div",17)(29,"h2",18),e.EFF(30,"Products"),e.k0s(),e.j41(31,"div",19),e.DNE(32,_,13,4,"ng-container",20),e.nrm(33,"app-product-quickview",null,1),e.k0s()()()()}2&t&&(e.Y8G("fullscreen",!0),e.R7$(5),e.JRh(r.userName),e.R7$(11),e.R50("ngModel",r.searchTerm),e.R7$(5),e.Y8G("ngClass",e.l_i(7,f,"Todo"===r.selectedFilter,"Todo"!==r.selectedFilter)),e.R7$(2),e.Y8G("ngClass",e.l_i(10,f,"Postres"===r.selectedFilter,"Postres"!==r.selectedFilter)),e.R7$(2),e.Y8G("ngClass",e.l_i(13,f,"carnes"===r.selectedFilter,"carnes"!==r.selectedFilter)),e.R7$(7),e.Y8G("ngForOf",r.filteredProductos))},dependencies:[u.W9,g.YU,g.Sq,p.me,p.BC,p.vS,P,F.k]}),a})()}];let E=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[v.iI.forChild(C),v.iI]}),a})(),I=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.bv,g.MD,p.YN,x.S,E]}),a})()}}]);